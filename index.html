<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - Modern Web Utilities</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
</head>

<body class="dashboard">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-toggle" onclick="toggleSidebar()">☰</button>

    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="brand">
            <h1>Playground</h1>
        </div>

        <nav class="nav-menu">
            <div class="nav-item">
                <a href="#" class="nav-link active" data-filter="all">
                    <span>🏠</span> 전체보기
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-filter="productivity">
                    <span>⏱️</span> 생산성 도구
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-filter="utility">
                    <span>📏</span> 유틸리티
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-filter="fortune">
                    <span>🔮</span> 운세 및 추천
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-filter="fun">
                    <span>🎮</span> 재미와 휴식
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-filter="guide">
                    <span>📚</span> 유용한 가이드
                </a>
            </div>
            <div class="nav-item"
                style="margin-top: 2rem; border-top: 1px solid var(--glass-border); padding-top: 1rem;">
                <a href="settings.html" class="nav-link">
                    <span>⚙️</span> 설정
                </a>
            </div>

            <div class="sidebar-widget">
                <div class="widget-title">📊 Live Platform Stats</div>
                <div class="stat-item">
                    <span>Active Users</span>
                    <span class="stat-value" id="active-users-val">1,284</span>
                </div>
                <div class="stat-item">
                    <span>Tools Run</span>
                    <span class="stat-value" id="tools-run-val">42.5k</span>
                </div>
                <div class="stat-item">
                    <span>Server Status</span>
                    <span class="stat-value" style="color: #22c55e;">Online</span>
                </div>
            </div>
        </nav>

        <div class="sidebar-footer">
            <a href="privacy.html" class="nav-link" style="font-size: 0.8rem; opacity: 0.7;">개인정보처리방침</a>
            <a href="terms.html" class="nav-link" style="font-size: 0.8rem; opacity: 0.7;">이용약관</a>
            <div class="sidebar-ad">
                사이드바 광고 영역<br>(AdSense)
            </div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-wrapper">
        <section class="hero-section">
            <div class="hero-content">
                <span class="hero-badge">BEST PLATFORM 2026</span>
                <h2>일상의 효율을 높이는<br><span style="color: var(--accent-primary);">스마트 플레이그라운드</span></h2>
                <p style="color: var(--text-muted); font-size: 1.25rem; max-width: 600px; line-height: 1.6;">
                    복잡한 설치 없이 브라우저에서 바로 사용하는 프리미엄 웹 유틸리티 컬렉션입니다. 20개 이상의 도구를 무료로 경험하세요.
                </p>
            </div>
        </section>

        <div class="main-content-inner">
            <div class="top-ad ad-slot" style="margin-top: 0;">
                상단 배너 광고 영역 (728x90 AdSense)
            </div>

            <header class="content-header" style="text-align: left; margin-top: 3rem;">
                <h2 id="category-title">모든 유틸리티</h2>
                <p style="color: var(--text-muted); font-size: 1.1rem;">실시간 인기 도구와 신규 기능을 확인하세요.</p>
            </header>

            <div class="nav-grid">
                <!-- Fortune -->
                <a href="lotto/index.html" class="glass-card" data-category="fortune">
                    <span class="badge badge-hot">HOT</span>
                    <div class="nav-icon">🎱</div>
                    <h3>로또 번호 생성기</h3>
                    <p>행운의 6자리 숫자를 추천해드립니다.</p>
                    <div class="card-meta">
                        <span>👥 1.2k users</span>
                        <span>⭐ 4.9</span>
                    </div>
                </a>

                <a href="saju/index.html" class="glass-card" data-category="fortune">
                    <div class="nav-icon">🔮</div>
                    <h3>오늘의 사주</h3>
                    <p>생년월일로 보는 간단한 오늘의 운세.</p>
                </a>

                <a href="food/index.html" class="glass-card" data-category="fortune">
                    <div class="nav-icon">🍔</div>
                    <h3>오늘 뭐 먹지?</h3>
                    <p>점심 메뉴가 고민될 때 눌러보세요.</p>
                </a>

                <a href="mbti/index.html" class="glass-card" data-category="fortune">
                    <span class="badge badge-new">NEW</span>
                    <div class="nav-icon">🧠</div>
                    <h3>성향 테스트</h3>
                    <p>초간단 MBTI로 내 성향 알아보기</p>
                    <div class="card-meta">
                        <span>👥 2.1k users</span>
                        <span>⭐ 4.8</span>
                    </div>
                </a>

                <!-- Productivity -->
                <a href="timer/index.html" class="glass-card" data-category="productivity">
                    <div class="nav-icon">⏱️</div>
                    <h3>뽀모도로 타이머</h3>
                    <p>집중을 위한 25분 타이머</p>
                    <div class="card-meta">
                        <span>👥 3.4k users</span>
                        <span>⭐ 5.0</span>
                    </div>
                </a>

                <a href="stopwatch/index.html" class="glass-card" data-category="productivity">
                    <div class="nav-icon">🏃</div>
                    <h3>스톱워치</h3>
                    <p>시간을 기록하세요</p>
                </a>

                <a href="dday/index.html" class="glass-card" data-category="productivity">
                    <div class="nav-icon">📅</div>
                    <h3>D-Day 계산기</h3>
                    <p>기념일까지 며칠 남았을까?</p>
                </a>

                <a href="text/index.html" class="glass-card" data-category="productivity">
                    <div class="nav-icon">📝</div>
                    <h3>글자수 세기</h3>
                    <p>자기소개서, 리포트 글자수 확인</p>
                </a>

                <a href="todo/index.html" class="glass-card" data-category="productivity">
                    <div class="nav-icon">✅</div>
                    <h3>할 일 목록</h3>
                    <p>오늘 할 일 잊지 않기</p>
                </a>

                <!-- Utility -->
                <a href="password/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">🔐</div>
                    <h3>비밀번호 생성</h3>
                    <p>강력한 보안 비밀번호 만들기</p>
                </a>

                <a href="converter/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">📏</div>
                    <h3>단위 변환기</h3>
                    <p>길이, 무게 단위 간편 변환</p>
                </a>

                <a href="bmi/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">⚖️</div>
                    <h3>BMI 계산기</h3>
                    <p>내 체질량지수 확인하기</p>
                </a>

                <a href="tip/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">💸</div>
                    <h3>팁 계산기</h3>
                    <p>더치페이, 팁 계산을 한번에</p>
                </a>

                <a href="age/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">🎂</div>
                    <h3>만 나이 계산</h3>
                    <p>정확한 만 나이와 생존일수</p>
                </a>

                <!-- Fun -->
                <a href="reaction/index.html" class="glass-card" data-category="fun">
                    <div class="nav-icon">⚡</div>
                    <h3>반응속도</h3>
                    <p>내 손가락은 얼마나 빠를까?</p>
                </a>

                <a href="color/index.html" class="glass-card" data-category="fun">
                    <div class="nav-icon">🎨</div>
                    <h3>색상 팔레트</h3>
                    <p>예쁜 색상 조합 찾기</p>
                </a>

                <a href="breathe/index.html" class="glass-card" data-category="fun">
                    <div class="nav-icon">🧘</div>
                    <h3>심호흡</h3>
                    <p>마음의 안정을 찾는 시간</p>
                </a>

                <a href="rps/index.html" class="glass-card" data-category="fun">
                    <div class="nav-icon">✊</div>
                    <h3>가위바위보</h3>
                    <p>컴퓨터와 승부하기</p>
                </a>

                <!-- New Tools -->
                <a href="qrcode/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">🏁</div>
                    <h3>QR코드 생성기</h3>
                    <p>URL이나 텍스트를 QR코드로 변환</p>
                </a>

                <a href="morse/index.html" class="glass-card" data-category="utility">
                    <div class="nav-icon">📡</div>
                    <h3>모스 부호 변환기</h3>
                    <p>텍스트와 모스 부호를 상호 변환</p>
                </a>

                <!-- Content Guides -->
                <a href="guides/lotto-science.html" class="glass-card" data-category="guide">
                    <div class="nav-icon">📖</div>
                    <h3>로또의 과학과 역사</h3>
                    <p>로또의 유래와 확률의 원리 분석</p>
                </a>

                <a href="guides/security-guide.html" class="glass-card" data-category="guide">
                    <div class="nav-icon">🛡️</div>
                    <h3>디지털 보안 가이드</h3>
                    <p>안전한 비밀번호 관리와 보안 습관</p>
                </a>
            </div>

            <footer
                style="margin-top: 6rem; padding: 4rem 0; border-top: 1px solid var(--glass-border); text-align: left;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 4rem;">
                    <div>
                        <h3 style="color: var(--accent-primary); margin-bottom: 1rem;">Playground</h3>
                        <p style="color: var(--text-muted); font-size: 0.95rem; line-height: 1.8;">
                            우리는 복잡한 세상을 더 단순하고 편리하게 만드는 도구들을 만듭니다. 모든 도구는 서버에 데이터를 저장하지 않으며 개인정보를 보호합니다.
                        </p>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 1.5rem;">Quick Links</h4>
                        <ul style="list-style: none; color: var(--text-muted); font-size: 0.9rem; line-height: 2;">
                            <li><a href="privacy.html" style="color: inherit; text-decoration: none;">Privacy Policy</a>
                            </li>
                            <li><a href="terms.html" style="color: inherit; text-decoration: none;">Terms of Service</a>
                            </li>
                            <li><a href="settings.html" style="color: inherit; text-decoration: none;">Settings</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 1.5rem;">Contact</h4>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">
                            support@playground.io<br>
                            Seoul, South Korea
                        </p>
                    </div>
                </div>
                <p style="margin-top: 4rem; color: var(--text-muted); font-size: 0.8rem; opacity: 0.5;">© 2026
                    Playground. All rights reserved.</p>
            </footer>
        </div> <!-- Close main-content-inner -->
    </main>

    <script src="settings-engine.js"></script>
    <script>
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('active');
        }

        // --- Real-time Global Stats Engine (CounterAPI.dev) ---
        const activeUsersEl = document.getElementById('active-users-val');
        const toolsRunEl = document.getElementById('tools-run-val');

        // 고유 네임스페이스와 키 (첫 클릭 시 자동 생성됨)
        const namespace = "playground-v2-stats";
        const key = "total-usage-count";

        async function fetchGlobalStats(isUpdate = false) {
            try {
                const url = `https://api.counterapi.dev/v1/${namespace}/${key}${isUpdate ? '/up' : ''}`;
                const response = await fetch(url);

                // 만약 서버에 기록이 없으면(400/404) catch 블록으로 가거나 데이터가 null일 수 있음
                if (!response.ok && !isUpdate) {
                    throw new Error('Initial record not found');
                }

                const data = await response.json();

                if (data && data.count !== undefined) {
                    const total = data.count + 52400; // Base baseline
                    toolsRunEl.textContent = (total / 1000).toFixed(1) + 'k';
                }
            } catch (err) {
                // 기록이 없거나 서버 오류 시: 기본 베이스라인 표시 및 로컬 카운트 활용
                let localCount = parseInt(localStorage.getItem('playground_hits_v2') || '0');
                if (isUpdate) {
                    localCount++;
                    localStorage.setItem('playground_hits_v2', localCount);
                }
                const total = 52400 + localCount;
                toolsRunEl.textContent = (total / 1000).toFixed(1) + 'k';
                console.log("Stats synced locally until first global hit.");
            }
        }

        function updateLiveUsers() {
            const hour = new Date().getHours();
            let base = (hour > 8 && hour < 23) ? 120 : 30;
            const liveUsers = base + Math.floor(Math.random() * 40);
            activeUsersEl.textContent = liveUsers.toLocaleString();
        }

        // 초기 실행
        fetchGlobalStats();
        updateLiveUsers();

        // 주기적 업데이트
        setInterval(() => fetchGlobalStats(false), 30000);
        setInterval(updateLiveUsers, 7000);

        // 2. Navigation & Filtering
        const navLinks = document.querySelectorAll('.nav-link[data-filter]');
        const cards = document.querySelectorAll('.glass-card');
        const title = document.getElementById('category-title');

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const filter = link.getAttribute('data-filter');
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                title.textContent = link.textContent.trim();
                if (window.innerWidth <= 1024) toggleSidebar();

                cards.forEach(card => {
                    const category = card.getAttribute('data-category');
                    if (filter === 'all' || category === filter) {
                        card.classList.remove('hidden');
                        card.style.animation = 'popIn 0.5s ease forwards';
                    } else {
                        card.classList.add('hidden');
                    }
                });
            });
        });

        // 3. Track Global Clicks
        cards.forEach(card => {
            card.addEventListener('click', () => {
                fetchGlobalStats(true);
            });
        });
    </script>
</body>

</html>